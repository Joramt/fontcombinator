$(document).ready(function(){function b(a){if(a.kind==="webfonts#webfontList"){d(a.items);e(a.items)}else c()}function c(){$("<h2>I&rsquo;m sorry, but we can&rsquo;t seem to reach Google Fonts.</h2>").prependTo("body")}function d(b){var c="http://fonts.googleapis.com/css?family=",d=$("#h1_select").children();$(a).empty();$(a).append("<option disabled>*** Google Fonts ***</option>");for(var e=0;e<b.length;e++)if(b[e].subsets.indexOf("latin")!==-1){var f=b[e].family,g=b[e].family.replace(/\s+/g,"+"),h=b[e].family.replace(/\s+/g,"");$('<link rel="stylesheet" href="'+c+g+"&subset=latin&text="+h+'"  type="text/css" />').appendTo("head");$(a).append('<option value="'+f+'">'+f+"</option>")}$(a).append("<option>*** System Fonts ***</option>");$(a).append(d);$(a).chosen();$(".chzn-container").css("width","180px");$("li.active-result").each(function(){$(this).css("font-family",$(this).html())})}function e(b){$(a).change(function(){var a="http://fonts.googleapis.com/css?family=",c=$(this).val(),d=$(this).attr("id").split("_select")[0];$(d).css("font-style","normal");$(this).siblings(".variant_select").remove();$("#"+d+"_variant_chzn").remove();for(var e=0;e<b.length;e++){var f=b[e].variants;if(b[e].family===c&&f.length>1){var g=f.toString();$('<link rel="stylesheet" href="'+a+c.replace(/\s+/g,"+")+":"+g+'&subset=latin" type="text/css" />').appendTo("head");$('<select class="variant_select" id="'+d+'_variant" name="'+d+'v"><select>').insertAfter("#"+d+"_select_chzn");for(var e=0;e<f.length;e++){var h=f[e].replace("italic"," italic");h==="regular"?$('<option value="400" selected>400</option>').appendTo("#"+d+"_variant"):h==="400"?$('<option value="'+h+'" selected>'+h+"</option>").appendTo("#"+d+"_variant"):h===" italic"?$('<option value="400 italic">400 italic</option>').appendTo("#"+d+"_variant"):$('<option value="'+h+'">'+h+"</option>").appendTo("#"+d+"_variant")}$(d).css("font-family",c).css("font-weight","400");$("#"+d+"_select_chzn .chzn-single").css("font-family",c);$(".variant_select").chosen();$("#"+d+"_variant_chzn").css({"font-family":c,"min-width":"90px"});$("#"+d+"_variant_chzn div.chzn-drop").css("width","88px");$("#"+d+"_variant_chzn").find("input").css("width","53px");$("#"+d+"_variant_chzn li").each(function(){$(this).css("font-family",c);$(this).html().indexOf("italic")===-1?$(this).css("font-weight",$(this).html()):$(this).css("font-weight",$(this).html().split(" italic")[0]).css("font-style","italic")});return!1}if(b[e].family===c){console.log(c);$('<link rel="stylesheet" href="'+a+c.replace(/\s+/g,"+")+'&subset=latin" type="text/css"  />').appendTo("head");$("#"+d+"_select_chzn .chzn-single").css("font-family",c)}}if(c==="Arial"||c==="Garamond"||c==="Georgia"||c==="Helvetica"||c==="Lucida Grande"||c==="Palatino"||c==="Tahoma"||c==="Times New Roman"||c==="Trebuchet MS"||c==="Verdana"){$("#"+d+"_select_chzn .chzn-single").css("font-family",c);$('<select class="variant_select" id="'+d+'_variant" name="'+d+'v"><option value="400" selected>400</option><option value="400 italic">400 italic</option><option>Bold</option><option>Bold italic</option><select>').insertAfter("#"+d+"_select_chzn");$(".variant_select").chosen();$("#"+d+"_variant_chzn").css({"font-family":c,"min-width":"90px"});$("#"+d+"_variant_chzn div.chzn-drop").css("width","88px");$("#"+d+"_variant_chzn").find("input").css("width","53px");$("#"+d+"_variant_chzn li").each(function(){$(this).css("font-family",c);$(this).html().indexOf("italic")===-1?$(this).css("font-weight",$(this).html()):$(this).css("font-weight",$(this).html().split(" italic")[0]).css("font-style","italic")})}$(d).css("font-family",c)})}function f(){$("body").on("change",".variant_select",function(){var a=$(this).attr("id").split("_variant")[0],b=$(this).val();if(b.indexOf(" italic")===-1){$(a).css("font-weight",b).css("font-style","normal");$(a,"#"+a+"_variant_chzn").css("font-style","normal");$("#"+a+"_variant_chzn").css({"font-weight":b,"font-style":"normal"})}else{$(a).css("font-weight",b.replace(" italic",""));$(a).css("font-style","italic");$("#"+a+"_variant_chzn").css("font-weight",b.replace(" italic",""))}})}function g(a,b,c,d){$(a+" a").click(function(){var a=$(this).attr("href"),e=$(this);$(this).hasClass(b)||$("."+c+"."+b).fadeOut(d,function(){$("."+b).removeClass(b);$(e).addClass(b);$(a).fadeIn(d,function(){$(this).addClass(b)})});return!1})}function h(){if(!document.getElementsByTagName)return;var a=document.getElementsByTagName("a");for(var b=0;b<a.length;b++){var c=a[b];c.getAttribute("href")&&c.getAttribute("rel")=="external"&&(c.target="_blank")}}var a="#h1_select, #h2_select, #p_select";$.ajax({url:"https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyAc3a2WfPaSbA1B25u78zFQRfAide8T34c&sort=alpha&sort=desc",dataType:"jsonp",success:b,error:c});$("#submit").hide();f();$("#h1size, #h2size, #psize").on("change",function(){var a=$(this).attr("id").split("size")[0],b=$(this).val();$(a).css("font-size",b+"px");$(this).next("span.value").text(b)});$("#h1lh, #h2lh, #plh").on("change",function(){var a=$(this).attr("id").split("lh")[0],b=parseFloat($(this).val()).toFixed(2);$(a).css("line-height",$(this).val());$(this).next("span.value").text(b)});$("#h1color, #h2color, #pcolor").ColorPicker({onShow:function(){thisEl=$(this).attr("id");thisElem=thisEl.split("color")[0]},onChange:function(a,b,c,d){$("#"+thisEl).val(b);$(d).ColorPickerHide();$(thisElem).css("color","#"+b)},onBeforeShow:function(){$(this).ColorPickerSetColor(this.value)}}).bind("keyup",function(){$(this).ColorPickerSetColor(this.value)});$("#bgcolor").ColorPicker({onShow:function(){thisEl=$(this).attr("id")},onChange:function(a,b,c,d){$("#"+thisEl).val(b);$(d).ColorPickerHide();$("body").css("background-color","#"+b)},onBeforeShow:function(){$(this).ColorPickerSetColor(this.value)}}).bind("keyup",function(){$(this).ColorPickerSetColor(this.value)});$("#h1_hide, #h2_hide, #p_hide").on("click",function(){var a=$(this).attr("id").split("_hide")[0];if($(this).val()==="Hide"){$(a).fadeOut("slow");$(this).val("Show")}else{$(a).fadeIn("slow");$(this).val("Hide")}});$('<a href="#" id="hide_controls">Hide</a>').insertAfter("#controls");$("#hide_controls").on("click",function(){$("#controls").slideToggle("slow");return!1});$("body").attr("spellcheck",!1);$("#control_option").on("change",function(){var a=$(this).val(),b="#"+a+"_sec";$(b).hasClass("active")||$(".control.active").fadeOut("fast",function(){$(".control.active").removeClass("active");$(b).fadeIn("fast",function(){$(this).addClass("active");$("#h1_select_chzn, #h2_select_chzn, #p_select_chzn").css("width","180px")})})});g("#panel_nav","here","panel","normal");h()});